

<!DOCTYPE html>
<html lang="zh-CN">

<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <title>ç®—æ³•â€”â€”è€é¼ æ¯’è¯é—®é¢˜ [ Sincerity ]</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="icon" href="/images/favicon-32x32.png">
  
  <!-- stylesheets list from _config.yml -->
  
  <link rel="stylesheet" href="/css/simple.css">
  
  <link rel="stylesheet" href="/css/font.css">
  
  
</head>

<body>

  <header class="header">
    <nav class="nav">
      <a href="/" class="nav-logo"><img src="/images/avatar.png" width="50" height="50" alt="Logo"></a>
      <ul class="nav-links">
        
        <li><a href="/">æ–‡ç« </a></li>
        
        <li><a href="/archives">å½’æ¡£</a></li>
        
        <li><a href="/leetcode">åŠ›æ‰£</a></li>
        
        <li><a href="/about">å…³äºæˆ‘</a></li>
        
        <li><a href="https://github.com/calebman">Github</a></li>
        
      </ul>
    </nav>
  </header>

  <main class="content">
    
<article class="article">
  <h1 class="article-title">ç®—æ³•â€”â€”è€é¼ æ¯’è¯é—®é¢˜</h1>
  <span class="article-date">2019-06-12</span>
  
  
  <a class="article-tag" href="/tags/Algorithm">
    Algorithm
  </a>
  
  <a class="article-tag" href="/tags/Java">
    Java
  </a>
  
  

  <div><p>â€ƒâ€ƒæœ‰16ç“¶æ°´ï¼Œå…¶ä¸­ä¸€ç“¶æœ‰æ¯’ï¼Œå°ç™½é¼ å–ä¸€æ»´æœ‰æ¯’çš„æ°´ä¸€å°æ—¶åä¼šæ­»ï¼Œè¦åœ¨ä¸€å°æ—¶æ‰¾å‡ºæ¥å“ªç“¶æ°´æœ‰æ¯’æœ€å°‘éœ€è¦å‡ åªå°ç™½é¼  ï¼Ÿ</p>
<a id="more"></a>
<h1>æ„é€ é¢˜ç›®</h1>
<pre><code class="language-java">/**
 * @author JianhuiChen
 * @description è€é¼ æ¯’è¯é—®é¢˜
 * @date 2019/6/12
 */
public class MousePoisonQuestion {

    public static void main(String[] args) {
        normalSolution();
    }

    /**
     * æ™®é€šè§£æ³• 16ç“¶æ°´ç”¨16åªè€é¼ æ¥æ‰¾ å“ªåªæ­»äº†ä»£è¡¨å“ªç“¶æ°´æœ‰æ¯’
     */
    private static void normalSolution() {
        final int bottleCount = 16;
        List&lt;Mouse&gt; mouseList = new ArrayList&lt;&gt;();
        for (int i = 0; i &lt; bottleCount; i++) {
            mouseList.add(new Mouse(i, Collections.singleton(i)));
        }
        findPoisonWater(bottleCount, mouseList, mouses -&gt; mouses.stream()
                .filter(Mouse::isDie)
                .findFirst()
                .get()
                .getId());
    }

    /**
     * å¯»æ‰¾æœ‰æ¯’çš„æ°´
     *
     * @param bottleCount æ°´çš„ç“¶æ•°
     * @param mouses   è€é¼ åˆ—è¡¨
     * @param judge    æ ¹æ®è€é¼ å–å®Œæ°´çš„çŠ¶æ€åˆ¤æ–­å‡ºæ¯’è¯çš„ç¼–å·
     */
    private static void findPoisonWater(int bottleCount, List&lt;Mouse&gt; mouses, Function&lt;List&lt;Mouse&gt;, Integer&gt; judge) {
        List&lt;Water&gt; waters = initWaters(bottleCount);
        mouses.forEach(mouse -&gt; mouse.setDie(waters));
        // ä¸€å°æ—¶å
        int resultPoisonId = judge.apply(mouses);
        int poisonId = waters.indexOf(waters.stream().filter(Water::isPoison).findFirst().get());
        Water water = waters.get(poisonId);
        assert (water.isPoison()) : &quot;åˆ¤æ–­æœ‰è¯¯,ç¬¬&quot; + poisonId + &quot;ç“¶æ°´ä¸æ˜¯æ¯’è¯,æ­£ç¡®ç­”æ¡ˆæ˜¯ç¬¬&quot; + resultPoisonId + &quot;ç“¶&quot;;
        System.out.println(&quot;æ­å–œä½ æ‰¾å‡ºäº†åŒ…å«æ¯’è¯çš„æ°´,å…±ä½¿ç”¨äº†&quot; + mouses.size() + &quot;åªè€é¼ &quot;);
    }

    /**
     * åˆå§‹åŒ–Lenç“¶æ°´
     *
     * @param len æ°´ç“¶æ•°
     * @return å¸¦æœ‰ä¸€ç“¶æ¯’è¯çš„æ°´åˆ—è¡¨
     */
    private static List&lt;Water&gt; initWaters(int len) {
        Boolean[] poisons = new Boolean[len];
        poisons[new Random().nextInt(len)] = true;
        return Arrays.stream(poisons)
                .map(poison -&gt; new Water(poison != null))
                .collect(Collectors.toList());
    }

    /**
     * è€é¼ å¯¹è±¡
     */
    static class Mouse {
        /**
         * è€é¼ å–è¿‡çš„æ°´ID
         */
        private Integer[] drinkWaterIds;
        /**
         * è€é¼ ID
         */
        private int id;
        /**
         * è€é¼ æ˜¯å¦æ­»äº¡
         */
        private boolean die;

        Mouse(int id, Collection&lt;Integer&gt; drinkWaterIds) {
            this.id = id;
            this.drinkWaterIds = drinkWaterIds.toArray(new Integer[]{});
        }

        void setDie(List&lt;Water&gt; waters) {
            this.die = Arrays.stream(drinkWaterIds)
                    .anyMatch(id -&gt; waters.get(id).isPoison());
        }

        boolean isDie() {
            return die;
        }

        int getId() {
            return id;
        }
    }

    /**
     * æ°´å¯¹è±¡
     */
    static class Water {
        /**
         * æ˜¯å¦æœ‰æ¯’
         */
        private boolean poison;

        Water(boolean poison) {
            this.poison = poison;
        }

        boolean isPoison() {
            return poison;
        }
    }
}
</code></pre>
<h1>è§£é¢˜æ€è€ƒ</h1>
<p>â€ƒâ€ƒ æ˜¾ç„¶ï¼Œä½¿ç”¨äº†åå…­åªè€é¼ æ¥æ‰¾è¿™ç“¶æ¯’è¯è‚¯å®šä¸æ˜¯æœ€ä¼˜è§£ï¼Œæˆ‘ä»¬æ¥æƒ³ï¼Œ16ç“¶æ°´ä¸­æœ‰ä¸€ç“¶æ¯’è¯ä¸€å…±æœ‰16ç§å¯èƒ½æ€§ï¼Œè€Œè€é¼ æœ‰ç”Ÿå­˜å’Œæ­»äº¡ä¸¤ç§çŠ¶æ€ï¼Œå‡è®¾æˆ‘ä»¬ä½¿ç”¨0å’Œ1è¡¨ç¤ºè€é¼ çš„ç”Ÿå­˜ä¸æ­»äº¡ï¼Œé‚£ä¹ˆå››åªè€é¼ å°±èƒ½æ’åˆ—ç»„åˆå‡º16ç§å¯èƒ½æ€§ï¼Œæˆ‘ä»¬æ¥åˆ©ç”¨äºŒè¿›åˆ¶æ’åˆ—å‡ºè¿™16ç§æƒ…å†µã€‚</p>
<table>
<thead>
<tr>
<th>ğŸ­è€é¼ 1</th>
<th>ğŸ­è€é¼ 2</th>
<th>ğŸ­è€é¼ 3</th>
<th>ğŸ­è€é¼ 4</th>
<th>ğŸºæ°´</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1 ğŸº</td>
<td>ç“¶å­1</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>1 ğŸº</td>
<td>0</td>
<td>ç“¶å­2</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>1 ğŸº</td>
<td>1 ğŸº</td>
<td>ç“¶å­3</td>
</tr>
<tr>
<td>0</td>
<td>1 ğŸº</td>
<td>0</td>
<td>0</td>
<td>ç“¶å­4</td>
</tr>
<tr>
<td>0</td>
<td>1 ğŸº</td>
<td>0</td>
<td>1 ğŸº</td>
<td>ç“¶å­5</td>
</tr>
<tr>
<td>0</td>
<td>1 ğŸº</td>
<td>1 ğŸº</td>
<td>0</td>
<td>ç“¶å­6</td>
</tr>
<tr>
<td>0</td>
<td>1 ğŸº</td>
<td>1 ğŸº</td>
<td>1 ğŸº</td>
<td>ç“¶å­7</td>
</tr>
<tr>
<td>1 ğŸº</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>ç“¶å­8</td>
</tr>
<tr>
<td>1 ğŸº</td>
<td>0</td>
<td>0</td>
<td>1 ğŸº</td>
<td>ç“¶å­9</td>
</tr>
<tr>
<td>1 ğŸº</td>
<td>0</td>
<td>1 ğŸº</td>
<td>0</td>
<td>ç“¶å­10</td>
</tr>
<tr>
<td>1 ğŸº</td>
<td>0</td>
<td>1 ğŸº</td>
<td>1 ğŸº</td>
<td>ç“¶å­11</td>
</tr>
<tr>
<td>1 ğŸº</td>
<td>1 ğŸº</td>
<td>0</td>
<td>0</td>
<td>ç“¶å­12</td>
</tr>
<tr>
<td>1 ğŸº</td>
<td>1 ğŸº</td>
<td>0</td>
<td>1 ğŸº</td>
<td>ç“¶å­13</td>
</tr>
<tr>
<td>1 ğŸº</td>
<td>1 ğŸº</td>
<td>1 ğŸº</td>
<td>0</td>
<td>ç“¶å­14</td>
</tr>
<tr>
<td>1 ğŸº</td>
<td>1 ğŸº</td>
<td>1 ğŸº</td>
<td>1 ğŸº</td>
<td>ç“¶å­15</td>
</tr>
</tbody>
</table>
<p>æ’åˆ—ä¸‹æ¥å³æ˜¯</p>
<ul>
<li>ğŸ­è€é¼ 1å–ğŸº 8ï¼Œ9ï¼Œ10ï¼Œ11ï¼Œ12ï¼Œ13ï¼Œ14ï¼Œ15</li>
<li>ğŸ­è€é¼ 2å–ğŸº 4ï¼Œ5ï¼Œ6ï¼Œ7ï¼Œ12ï¼Œ13ï¼Œ14ï¼Œ15</li>
<li>ğŸ­è€é¼ 3å–ğŸº 2ï¼Œ3ï¼Œ6ï¼Œ7ï¼Œ10ï¼Œ11ï¼Œ14ï¼Œ15</li>
<li>ğŸ­è€é¼ 4å–ğŸº 1ï¼Œ3ï¼Œ5ï¼Œ7ï¼Œ9ï¼Œ11ï¼Œ13ï¼Œ15</li>
</ul>
<p>è¿™æ ·æ’åˆ—åï¼Œè€é¼ çš„ç”Ÿå­˜ä¸æ­»äº¡çŠ¶æ€éƒ½èƒ½å¾—åˆ°ä¸€ä¸²äºŒè¿›åˆ¶ç ï¼Œè¿™ä¸²äºŒè¿›åˆ¶ç å¯ä»¥è½¬æ¢æˆæœ‰æ¯’çš„ç“¶å­ä¿¡æ¯ï¼Œå¦‚</p>
<ul>
<li>0010ï¼šè¡¨ç¤ºğŸ­è€é¼ 3æ­»äº¡ï¼Œå…¶ä½™ğŸ­è€é¼ å­˜æ´»ï¼Œä»£è¡¨ğŸºç“¶å­2æ˜¯æ¯’è¯</li>
<li>0000ï¼šè¡¨ç¤ºæ²¡æœ‰ğŸ­è€é¼ æ­»äº¡ï¼Œä»£è¡¨ğŸºç“¶å­16æ˜¯æ¯’è¯</li>
</ul>
<h1>ç¼–ç å®ç°</h1>
<pre><code class="language-java">/**
    * ä½¿ç”¨äºŒè¿›åˆ¶çš„æ€è·¯è§£æ³•
    */
private static void binarySolution() {
    final int bottleCount = 16;
    List&lt;Mouse&gt; mouseList = new ArrayList&lt;&gt;();
    mouseList.add(new Mouse(1, Arrays.asList(8, 9, 10, 11, 12, 13, 14, 15)));
    mouseList.add(new Mouse(2, Arrays.asList(4, 5, 6, 7, 12, 13, 14, 15)));
    mouseList.add(new Mouse(3, Arrays.asList(2, 3, 6, 7, 10, 11, 14, 15)));
    mouseList.add(new Mouse(4, Arrays.asList(1, 3, 5, 7, 9, 11, 13, 15)));
    findPoisonWater(bottleCount, mouseList, mouses -&gt; {
        int num = -1;
        for (Mouse m : mouses) {
            num += Math.pow(2, m.isDie() ? (m.getId() - 1) : 0);
        }
        return num &lt; 0 ? (bottleCount - 1) : num;
    });
}
</code></pre>
<p>â€ƒâ€ƒè¿è¡Œåç¨‹åºå°†æ‰“å°**â€œæ­å–œä½ æ‰¾å‡ºäº†åŒ…å«æ¯’è¯çš„æ°´,å…±ä½¿ç”¨äº†4åªè€é¼ â€**ï¼Œä»£ç è¿è¡ŒæˆåŠŸäº†æ²¡é”™ï¼Œä½†æ˜¯é€šç”¨æ€§ä¸è¶³ï¼Œåªèƒ½å¤Ÿé€‚ç”¨äº16åªè€é¼ çš„è§£æ³•ï¼Œèƒ½å¦ç¼–å†™ä¸€ä¸ªæ ¹æ®ç“¶å­æ•°é‡ä½œä¸ºå‚æ•°çš„é€šç”¨è§£æ³•å‡½æ•°ï¼Ÿåªè¦ç†è§£è§£é¢˜æ€è·¯ï¼Œè¿™ä¸ªä»£ç å¹¶ä¸éš¾ï¼Œåœ¨æ­¤å°±ä¸åšæ¼”ç¤ºäº†ã€‚</p>
<p>â€ƒâ€ƒæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥åœ¨ä¸‹æ–¹ç•™è¨€ç»™å‡ºé€šç”¨è§£æ³•ğŸ¶</p>
<h1>é¢˜ç›®æ‹“å±•</h1>
<p>â€ƒâ€ƒ<strong>æœ‰16ç“¶æ°´ï¼Œå…¶ä¸­åªæœ‰ä¸€ç“¶æ°´æœ‰æ¯’ï¼Œå°ç™½é¼ å–ä¸€æ»´ä¹‹åä¸€å°æ—¶ä¼šæ­»ã€‚è¯·é—®æœ€å°‘ç”¨å¤šå°‘åªå°ç™½é¼ ï¼Œå¯ä»¥åœ¨1å°æ—¶å†…æ‰¾å‡ºè‡³å°‘14ç“¶æ— æ¯’çš„æ°´ã€‚</strong></p>
<p>â€ƒâ€ƒæ‰¾14ç“¶æ— æ¯’çš„æ°´æ˜¯å¯ä»¥è½¬åŒ–ä¸ºå’Œä¸Šé¢é‚£é“ä¸€æ ·çš„è§£é¢˜æ€è·¯ï¼Œæˆ‘ä»¬å°†16ç“¶æ°´åˆ†ä¸º8ç»„ä¸¤ä¸¤ä¸€ç“¶ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°ä¸€ç»„æ°´ä¸­åŒ…å«æ¯’è¯å³å¯å¾—åˆ°14ç“¶æ— æ¯’çš„æ°´ï¼Œä¸€ç»„æ°´åªå¯èƒ½æœ‰ä¸¤ç§çŠ¶æ€ï¼Œæœ‰æ¯’æˆ–è€…æ— æ¯’ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†8ç»„æ°´çœ‹ä½œ8ç“¶æ°´ï¼Œè‡³æ­¤é¢˜ç›®å°±å˜æˆäº†â€œ8ç“¶æ°´ç”¨æœ€å°‘å‡ åªè€é¼ æ‰¾é‚£ç“¶æœ‰æ¯’çš„æ°´â€ï¼Œç­”æ¡ˆæ˜¯3åªã€‚</p>
</div>

  
  <div>
    <h1>æ¨èé˜…è¯»</h1>
    <ul>
      
      <li><a href="/2020-06-24-floyd-cycle-detection-algorithm/"> Floydã€Brent åˆ¤åœˆç®—æ³•</a></li>
      
      <li><a href="/2019-07-14-thinking-topic/"> æµ·å²›å¯»å®é—®é¢˜</a></li>
      
      <li><a href="/2019-06-20-algorithm-topic/"> ç®—æ³•â€”â€”çŒ«é¼ æ¸¸æˆ</a></li>
      
      <li><a href="/2019-06-17-algorithm-topic/"> ç®—æ³•â€”â€”24ç‚¹æ¸¸æˆ</a></li>
      
      <li><a href="/2019-06-13-algorithm-topic/"> ç®—æ³•â€”â€”çˆ¬æ¥¼æ¢¯é—®é¢˜</a></li>
      
    </ul>
  </div>
  

</article>
<ul class="post-copyright">
  <li><strong>æœ¬æ–‡æ ‡é¢˜ï¼š</strong><a href="https://chenjianhui.site/2019-06-12-algorithm-topic/">ç®—æ³•â€”â€”è€é¼ æ¯’è¯é—®é¢˜</a></li>
  <li><strong>æœ¬æ–‡ä½œè€…ï¼š</strong><a href="https://chenjianhui.site">JianhuiChen</a></li>
  <li><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="https://chenjianhui.site/2019-06-12-algorithm-topic/">https://chenjianhui.site/2019-06-12-algorithm-topic/</a></li>
  <li><strong>å‘å¸ƒæ—¶é—´ï¼š</strong>2019-06-12</li>
  <li><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
  </li>
</ul>
<div id="gitalk-container"></div>

<!-- Gittalk.js -->
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<!-- Highlight.js -->
<link rel="stylesheet" href="/css/hljs.css">
<script src="/js/highlight.min.js"></script>
<script>
  hljs.initHighlightingOnLoad();
  const gitalk = new Gitalk({
    clientID: 'bd0cbb30da9c24da8c7c',
    clientSecret: 'bd64a8e8c8117d5f3e22291cd3f29f2c70e671ff',
    repo: 'blog',
    owner: 'calebman',
    admin: ['calebman']
  })
  gitalk.render('gitalk-container')
</script>
  </main>

  <footer class="footer">
    <ul class="footer-links">
      <section class="copyright">
        <a href="https://chenjianhui.site">JianhuiChen</a> Â© 2017 - 2020 | 
        <a href="http://www.beian.miit.gov.cn" style="line-height: 37px;font-size: 16px;">æ´¥ICPå¤‡19001724å·</a>
      </section>
    </ul>
  </footer>

  
  <!-- scripts list from theme config.yml -->
  
  <script src="/js/simple.js"></script>
  
  

</body>

</html>