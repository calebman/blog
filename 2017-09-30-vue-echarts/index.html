

<!DOCTYPE html>
<html lang="zh-CN">

<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <title>vue封装echarts组件 [ Sincerity ]</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="icon" href="/images/favicon-32x32.png">
  
  <!-- stylesheets list from _config.yml -->
  
  <link rel="stylesheet" href="/css/simple.css">
  
  <link rel="stylesheet" href="/css/font.css">
  
  
</head>

<body>

  <header class="header">
    <nav class="nav">
      <a href="/" class="nav-logo"><img src="/images/avatar.png" width="50" height="50" alt="Logo"></a>
      <ul class="nav-links">
        
        <li><a href="/">文章</a></li>
        
        <li><a href="/archives">归档</a></li>
        
        <li><a href="/leetcode">力扣</a></li>
        
        <li><a href="/about">关于我</a></li>
        
        <li><a href="https://github.com/calebman">Github</a></li>
        
      </ul>
    </nav>
  </header>

  <main class="content">
    <article class="article">
  <h1 class="article-title">vue封装echarts组件</h1>
  <span class="article-date">2017-09-30</span>
  
  
  <a class="article-tag" href="/tags/vuejs">
    vuejs
  </a>
  
  <a class="article-tag" href="/tags/echarts">
    echarts
  </a>
  
  

  <div><p>将Echarts做一层小小的封装以满足使用需求</p>
<a id="more"></a>
<h1>说明</h1>
<hr>
<p>做项目的时候为了让数据展示的更加直观，总会用到图表相关的控件，而说到图表控件第一时间当然想到<a href="http://echarts.baidu.com/examples.html" target="_blank" rel="noopener">ECharts</a>这个开源项目，而它不像iview、element-ui这些组件使用起来那么便捷，需要绕一个小弯，为了图方便于是对ECharts进行了一层封装</p>
<h2 id="控件演示">控件演示</h2>
<p><img src="https://resources.chenjianhui.site/2017-09-30-effect.gif" alt></p>
<h2 id="控件使用">控件使用</h2>
<hr>
<h4 id="概要">概要</h4>
<ul>
<li>基于echarts的二次封装</li>
<li>由数据驱动</li>
<li>控件源码见src/components/charts</li>
</ul>
<h4 id="文档">文档</h4>
<ul>
<li>props</li>
</ul>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>_id</td>
<td>图表唯一标识，当id重复将会报错</td>
<td>String</td>
</tr>
<tr>
<td>_titleText</td>
<td>图表标题</td>
<td>String</td>
</tr>
<tr>
<td>_xText</td>
<td>x轴描述</td>
<td>String</td>
</tr>
<tr>
<td>_yText</td>
<td>y轴描述</td>
<td>String</td>
</tr>
<tr>
<td>_chartData</td>
<td>图表数据</td>
<td>Array</td>
</tr>
<tr>
<td>_type</td>
<td>图表类型，提供三种(LineAndBar/LineOrBar/Pie)</td>
<td>String</td>
</tr>
</tbody>
</table>
<ul>
<li>调用示例</li>
</ul>
<pre><code class="language-html"> &lt;chart
  :_id=&quot;'testCharts'&quot;
  :_titleText=&quot;'访问量统计'&quot;
  :_xText=&quot;'类别'&quot;
  :_yText=&quot;'总访问量'&quot;
  :_chartData=&quot;chartData&quot;
  :_type=&quot;'Pie'&quot;&gt;&lt;/chart&gt;
</code></pre>
<h2 id="实现方式">实现方式</h2>
<hr>
<ul>
<li>创建一个待渲染的dom</li>
</ul>
<pre><code class="language-html">&lt;template&gt;
    &lt;div :id=&quot;_id&quot; class=&quot;chart&quot;&gt;&lt;/div&gt;
&lt;/template&gt;
</code></pre>
<ul>
<li>绘制函数</li>
</ul>
<pre><code class="language-javascript">function drawPie(chartData,id,titleText,xText,yText) {
    var chart = echarts.init(document.getElementById(id))
    var xAxisData = chartData.map(function (item) {return item[0]})
    var pieData = []
    chartData.forEach((v,i)=&gt;{
      pieData.push({
        name:v[0],
        value:v[1]
      })
    })
    chart.setOption({
      title : {
        text: titleText,
        subtext: '',
        x:'center'
      },
      tooltip : {
        trigger: 'item',
        formatter: &quot;{a} &lt;br/&gt;{b} : {c} ({d}%)&quot;
      },
      legend: {
        orient: 'vertical',
        left: 'left',
        data: xAxisData
      },
      series : [
        {
          name: xText,
          type: 'pie',
          radius : '55%',
          center: ['50%', '60%'],
          data:pieData,
          itemStyle: {
            emphasis: {
              shadowBlur: 10,
              shadowOffsetX: 0,
              shadowColor: 'rgba(0, 0, 0, 0.5)'
            }
          }
        }
      ]
    })
  }
</code></pre>
<ul>
<li>挂载结束、数据源改变时重绘</li>
</ul>
<pre><code class="language-javascript">    watch:{
      _chartData(val){
        switch (this._type){
          case &quot;LineAndBar&quot;:
            drawLineAndBar(val,this._id,this._titleText,this._xText,this._yText);
            break
          case &quot;LineOrBar&quot;:
            drawLineOrBar(val,this._id,this._titleText,this._xText,this._yText);
            break
          case &quot;Pie&quot;:
            drawPie(val,this._id,this._titleText,this._xText,this._yText);
            break
          default:
            drawLineAndBar(val,this._id,this._titleText,this._xText,this._yText);
            break
        }
      }
    },
    mounted() {
      switch (this._type){
        case &quot;LineAndBar&quot;:
          drawLineAndBar(this._chartData,this._id,this._titleText,this._xText,this._yText);
          break
        case &quot;LineOrBar&quot;:
          drawLineOrBar(this._chartData,this._id,this._titleText,this._xText,this._yText);
          break
        case &quot;Pie&quot;:
          drawPie(this._chartData,this._id,this._titleText,this._xText,this._yText);
          break
        default:
          drawLineAndBar(this._chartData,this._id,this._titleText,this._xText,this._yText);
          break
      }
    }
</code></pre>
<p>如果觉得有用，欢迎star <a href="https://github.com/calebman/vue-DBM" target="_blank" rel="noopener">calebman/vue-DBM</a></p>
</div>
</article>
<ul class="post-copyright">
  <li><strong>本文标题：</strong><a href="https://chenjianhui.site/2017-09-30-vue-echarts/">vue封装echarts组件</a></li>
  <li><strong>本文作者：</strong><a href="https://chenjianhui.site">JianhuiChen</a></li>
  <li><strong>本文链接：</strong><a href="https://chenjianhui.site/2017-09-30-vue-echarts/">https://chenjianhui.site/2017-09-30-vue-echarts/</a></li>
  <li><strong>发布时间：</strong>2017-09-30</li>
  <li><strong>版权声明：</strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！
  </li>
</ul>
<div id="gitalk-container"></div>

<!-- Gittalk.js -->
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<!-- Highlight.js -->
<link rel="stylesheet" href="/css/hljs.css">
<script src="/js/highlight.min.js"></script>
<script>
  hljs.initHighlightingOnLoad();
  const gitalk = new Gitalk({
    clientID: 'bd0cbb30da9c24da8c7c',
    clientSecret: 'bd64a8e8c8117d5f3e22291cd3f29f2c70e671ff',
    repo: 'blog',
    owner: 'calebman',
    admin: ['calebman']
  })
  gitalk.render('gitalk-container')
</script>
  </main>

  <footer class="footer">
    <ul class="footer-links">
      <section class="copyright">
        <a href="https://chenjianhui.site">JianhuiChen</a> © 2017 - 2020 | 
        <a href="http://www.beian.miit.gov.cn" style="line-height: 37px;font-size: 16px;">津ICP备19001724号</a>
      </section>
    </ul>
  </footer>

  
  <!-- scripts list from theme config.yml -->
  
  <script src="/js/simple.js"></script>
  
  

</body>

</html>