---
title: ç®—æ³•â€”â€”çŒ«é¼ æ¸¸æˆ
date: 2019-06-20 19:23:16
thumbnail: https://resources.chenjianhui.site/algorithm-home-pic.jpeg
categories: 
- Algorithm
tags: 
- Algorithm
- Java
---

&emsp;&emsp;ç»™å®šä¸€å¼ åœ°å›¾ï¼Œå…¶ä¸­åŒ…å«`çŒ«`ã€`è€é¼ `ã€`éšœç¢ç‰©`ä¸‰ç±»å…ƒç´ ï¼Œæ¸¸æˆåˆå§‹åŒ–æ—¶çŒ«åœ¨åœ°å›¾çš„å·¦ä¸Šè§’ï¼Œè€é¼ åœ¨åœ°å›¾çš„å³ä¸‹è§’ï¼ŒçŒ«æ¯ä¸ªå›åˆå¯ä»¥é€‰æ‹©è‡ªå·±ä¸´è¿‘æ ¼å­ç§»åŠ¨ä¸€æ­¥ï¼Œä¸å¯è¶…è¿‡åœ°å›¾è¾¹ç•Œï¼Œä¸å¯ç§»åŠ¨è‡³æœ‰éšœç¢ç‰©å¤„ï¼Œè¯·è®¾è®¡ä¸€ä¸ªç®—æ³•è®©`çŒ«`ä½¿ç”¨æœ€å°‘çš„å›åˆæŠ“ä½`è€é¼ `ã€‚

<!-- more -->

# æ¸¸æˆè®¾è®¡

&emsp;&emsp;é¦–å…ˆæˆ‘ä»¬éœ€è¦è®¾è®¡å‡ºæ•´ä¸ªæ¸¸æˆï¼Œå¹¶é¢„ç•™å‡ºçŒ«çš„ç§»åŠ¨é€»è¾‘äº¤ç»™ç”¨æˆ·å»å®ç°ï¼Œè¿™é‡Œæˆ‘åŸºäºcanvasè®¾è®¡äº†[cat-mouse-game-gen.js](https://resources.chenjianhui.site/cat-mouse-game-gen-0.1.9.js)æ¥ä½œä¸ºæ¸¸æˆæ„å»ºç¨‹åºï¼Œå€ŸåŠ©è¿™ä¸ªè„šæœ¬ä½¿ç”¨å¦‚ä¸‹ä»£ç å³å¯æ„å»ºä¸€ä¸ªçŒ«é¼ æ¸¸æˆæ£‹ç›˜ï¼š

```html
<!DOCTYPE html>
<html lang="en">
<body>
<canvas id="gamePlace">not support canvas</canvas>
</body>
<script type="text/javascript" src="https://resources.chenjianhui.site/cat-mouse-game-gen-0.1.9.js"></script>
<script>
    gameGen.initGame('gamePlace')
</script>
</html>
```

{% raw %}
<canvas id="staticPlace">not support canvas</canvas>
{% endraw %}

&emsp;&emsp;å…¶ä¸­**gameGen.initGame(`canvasId`, `catHandler`, `mouseHandler`, `options`)**æ˜¯æ¸¸æˆçš„åˆå§‹åŒ–å‡½æ•°ï¼Œå®ƒè´Ÿè´£æ¸²æŸ“ç»Ÿè®¡æ•°æ®åŠè¿è¡Œæ¸¸æˆï¼Œå‡½æ•°å…±æ¥æ”¶å››ä¸ªå‚æ•°
* `canvasId`ï¼šcanvasç”»å¸ƒID
* `catHandler`ï¼š çŒ«çš„è¡ŒåŠ¨å†³ç­–å‡½æ•°function(`chessboard`, `curIndex`, `canMovePoints`) ï¼Œä¸ä¼ æ­¤å‚æ•°ä»£è¡¨ä¸è¡ŒåŠ¨ï¼Œå‡½æ•°çš„è¿”å›å€¼å³æ˜¯çŒ«çš„ä¸‹ä¸€æ­¥ä½ç½®ï¼Œè¡ŒåŠ¨ç›®æ ‡æ˜¯æŠ“ä½è€é¼ 
  * `chessboard`ï¼šæ£‹ç›˜å±€åŠ¿ï¼Œæ˜¯ä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼Œæ•°ç»„é•¿åº¦ä¸ºæ£‹ç›˜çš„æ€»æ ¼å­æ•°ï¼Œæ¯ä¸ªç‚¹ä½çš„å€¼éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆexp `{ flag: 1, depletePower: null }`ï¼‰ï¼ŒåŒ…æ‹¬`flag`ï¼ˆæ£‹å­ç±»å‹ï¼‰ä¸`depletePower`ï¼ˆå½“flagä¸º0æ—¶æ­¤å€¼ä¸ä¸ºç©ºï¼Œä»£è¡¨è¡Œèµ°éœ€è¦æ¶ˆè€—çš„ä½“åŠ›å€¼ï¼‰ä¸¤ä¸ªå±æ€§ï¼Œå…¶ä¸­`flag`çš„ç±»å‹ç å®šä¹‰å¦‚ä¸‹
    * 0ï¼šå¯ç§»åŠ¨æ ¼å­
    * 1ï¼šçŒ«
    * 2ï¼šè€é¼ 
    * 3ï¼šéšœç¢ç‰©
  * `curIndex`ï¼šçŒ«çš„å½“å‰ä½ç½®
  * `canMovePoints`ï¼šå¯ä»¥ç§»åŠ¨çš„ç‚¹ä½ï¼Œæ˜¯ä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼Œä»£è¡¨å¯ç§»åŠ¨çš„ä½ç½®ä¿¡æ¯ï¼Œå¦‚æœè¿”å›å€¼ä¸åœ¨æ­¤èŒƒå›´å†…æ£‹å­å°†ä¸ä¼šç§»åŠ¨
* `mouseHandler`: è€é¼ çš„è¡ŒåŠ¨å†³ç­–å‡½æ•°ï¼Œä»‹ç»åŒcatHandlerï¼Œè¡ŒåŠ¨ç›®æ ‡æ˜¯èº²é¿çŒ«çš„è¿½å‡»
* `options`: é…ç½®ä¿¡æ¯
  * `columns`ï¼šæ£‹ç›˜åˆ—çš„æ•°é‡ï¼Œé»˜è®¤ä¸º8
  * `rows`ï¼šæ£‹ç›˜è¡Œçš„æ•°é‡ï¼Œé»˜è®¤ä¸º16
  * `delay`ï¼šå›åˆæ—¶é—´å»¶è¿Ÿæ¯«ç§’æ•°ï¼Œé»˜è®¤ä¸º800
  * `complexRoad`ï¼šæ˜¯å¦å¼€å¯å¤æ‚é“è·¯ï¼Œé»˜è®¤ä¸ºfalseï¼Œå¼€å¯åå°†ä¼šå¼•å…¥ä¸åŒç±»å‹çš„é“è·¯å¦‚è‰åœ°/æºªæµï¼Œä¸åŒçš„é“è·¯è¡Œèµ°æ¶ˆè€—çš„ä½“åŠ›ä¹Ÿä¸åŒï¼Œé—®é¢˜å°†æ¼”å˜æˆæœ‰ä¼˜å…ˆçº§çš„æœ€çŸ­è·¯å¾„

&emsp;&emsp;ä¸¾ä¸ªä¾‹å­ï¼Œä»¥ä¸‹ä»£ç å®ç°äº†ä¸€ä¸ªéšæœºè¡ŒåŠ¨çš„çŒ«ï¼Œè™½ç„¶éšæœºç§»åŠ¨çš„çŒ«æŠ“åˆ°è€é¼ å…¨å‡­è¿æ°”ï¼Œä¸è¿‡è¿™ä¹Ÿç®—ä¸€ç§ç§»åŠ¨ç­–ç•¥äº†

```html
<canvas id="randomPlace">not support canvas</canvas>
<script>
    const randomHandler = (chessboard, curIndex, canMovePoints) => {
        const randomIndex = Math.round(Math.random() * (canMovePoints.length - 1))
        return canMovePoints[randomIndex]
    }
    gameGen.initGame('randomPlace', randomHandler)
</script>
```

{% raw %}
<canvas id="randomPlace">not support canvas</canvas>
{% endraw %}

# ç®—æ³•è®¾è®¡

&emsp;&emsp;è‡³æ­¤æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªå¯ä»¥æ ¹æ®ç®—æ³•ç§»åŠ¨çš„çŒ«äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯è®¾è®¡çŒ«æŠ“è€é¼ çš„ç®—æ³•ï¼Œæˆ‘ä»¬ç¨å¾®è½¬åŒ–ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®å°±æ˜¯æ ¹æ®è¡ŒåŠ¨å†³ç­–å‡½æ•°ä¸­çš„æ£‹ç›˜å±€åŠ¿æ•°ç»„å»æ‰¾çŒ«åˆ°è€é¼ ä¹‹é—´çš„**æœ€çŸ­è·¯å¾„**ï¼Œæ—¢ç„¶è¦æ‰¾æœ€çŸ­è·¯å¾„æˆ‘ä»¬å…ä¸äº†è¦å¯¹æ£‹ç›˜è¿›è¡Œéå†æœç´¢ï¼Œåœ¨ä¸Šä¸€ç¯‡åšå®¢[24ç‚¹æ¸¸æˆ](/2019-06-17-algorithm-topic)ä¸­æˆ‘ä»¬è®²åˆ°æœç´¢ç®—æ³•æœ‰`DFS`ä¸`BFS`ä¸¤ç§ç­–ç•¥ï¼Œæˆ‘ä»¬å¯¹æ¯”ä¸€ä¸‹è¿™ä¸¤ç§ç­–ç•¥ï¼Œ`DFS`ç®—æ³•å±äºä¸€ç§**ç›²ç›®æœç´¢**ï¼Œè¦æ‰¾åˆ°æœ€çŸ­è·¯å¾„å¿…ç„¶è¦éå†å…¨å±€ï¼Œè€Œ`BFS`æ‰©æ•£å¼æœç´¢ï¼Œåªè¦ç¬¬ä¸€æ¬¡æœç´¢åˆ°ç»ˆç‚¹å°±å¯ä»¥é€€å‡ºï¼Œä¸éœ€è¦éå†å…¨å±€ï¼Œå› æ­¤åœ¨è¿™é‡Œæˆ‘ä»¬å°†ä½¿ç”¨`BFS`å®ç°çŒ«çš„è¡ŒåŠ¨ç­–ç•¥ã€‚

## è®¾è®¡æ€è·¯

&emsp;&emsp;æˆ‘ä»¬å…ˆå‡è®¾æœ‰ä¸€ä¸ª4*8çš„æ£‹ç›˜ï¼ŒçŒ«åœ¨æ£‹ç›˜çš„å·¦ä¸Šè§’ï¼ˆæ•°ç»„çš„ä¸‹æ ‡0å¤„ï¼‰ï¼Œè€é¼ åœ¨æ£‹ç›˜çš„å³ä¸‹è§’ï¼ˆæ•°ç»„ä¸‹æ ‡31å¤„ï¼‰ï¼Œå¹¶åœ¨3ã€ 10ã€ 13ã€ 18ã€ 28å¤„ä½ç½®è®¾ç½®äº†5ä¸ªéšœç¢ç‰©ï¼Œç°åœ¨æˆ‘å°†åŸºäºè¿™ä¸ªå±€åŠ¿å»æ¨¡æ‹Ÿ`BFS`ç®—æ³•çš„æœç´¢æµç¨‹ã€‚

|        |      |                            |                           |                            |                            |      |           |
| ------ | ---- | -------------------------- | ------------------------- | -------------------------- | -------------------------- | ---- | --------- |
| 0:cat: | 1    | 2                          | **3**:mountain_bicyclist: | 4                          | 5                          | 6    | 7         |
| 8      | 9    | **10**:mountain_bicyclist: | 11                        | 12                         | **13**:mountain_bicyclist: | 14   | 15        |
| 16     | 17   | **18**:mountain_bicyclist: | 19                        | 20                         | 21                         | 22   | 23        |
| 24     | 25   | 26                         | 27                        | **28**:mountain_bicyclist: | 29                         | 30   | 31:mouse: |
|        |      |                            |                           |                            |                            |      |           |

1. **[å›åˆ1]** åŸºäºä½ç½®0æœç´¢å¯èƒ½çš„èµ°æ³•å¾—åˆ°[1, 8]ï¼Œåˆ¤æ–­æ‰€åœ¨ç‚¹ä½å¹¶éè€é¼ æ‰€åœ¨ç‚¹ä½ï¼Œå¦åˆ™åŸºäºè¿™ä¸¤ä¸ªç‚¹ä½ç»§ç»­æœç´¢
2. **[å›åˆ2]** åŸºäºä½ç½®1æœç´¢ => [0, 2, 9]ï¼Œç”±äº0æ˜¯å†å²èµ°è¿‡ç‚¹ä½ï¼Œå› æ­¤è¿‡æ»¤æ­¤é¡¹ => [2, 9]ï¼Œéç›®æ ‡ç‚¹ï¼Œå›åˆ°ç‚¹ä½8è¿›è¡Œæœç´¢
3. **[å›åˆ2]** åŸºäºä½ç½®8æœç´¢ => [0, 9, 16]ï¼Œè¿‡æ»¤ => [16]ï¼Œéç›®æ ‡ç‚¹ï¼Œå›åˆ°ç‚¹ä½2è¿›è¡Œæœç´¢ï¼Œåé¢çš„æ­¥éª¤é»˜è®¤è¿‡æ»¤
4. **[å›åˆ3]** åŸºäºä½ç½®2æœç´¢ => []ï¼Œ æ²¡æœ‰å¯ç§»åŠ¨ç‚¹ä½ï¼Œå›åˆ°ç‚¹ä½9è¿›è¡Œæœç´¢
5. **[å›åˆ3]** 9  => [17]ï¼Œéç›®æ ‡ç‚¹ï¼Œå›åˆ°16
6. **[å›åˆ3]** 16 => [24]ï¼Œéç›®æ ‡ç‚¹
7. **[å›åˆ4 - 8]** 24 => [25]ï¼Œ25 => [26]ï¼Œ26 => [27]ï¼Œ27 => [19]ï¼Œ19 => [11, 20]ï¼Œéç›®æ ‡ç‚¹
8. **[å›åˆ9]** 11 => [12]ï¼Œ20 => [21]
9. **[å›åˆ10]** 12 => [4]ï¼Œ21 => [22, 29]
10. **[å›åˆ11]** 4 => [5]ï¼Œ22 => [23, 30]ï¼Œ29 => []
11. **[å›åˆ12]**  5 => [6]ï¼Œ23 => [31]ï¼Œåˆ°è¾¾ç›®æ ‡ç‚¹ï¼Œç´¢å¼•èµ°è¿‡çš„è·¯å¾„ä¸º**31,23,22,21,20,19,27,26,25,24,16,8,0**

&emsp;&emsp;æ•´ä¸ªæµç¨‹ç®€å•æ¥è¯´å°±æ˜¯è‡ªå·¦åˆ°å³è‡ªä¸Šåˆ°ä¸‹éå†äº†å…¨éƒ¨çš„èŠ‚ç‚¹ï¼Œåªä¸è¿‡å®ƒæ˜¯æ ¹æ®å±‚æ¬¡ä¼˜å…ˆè¿›è¡Œéå†çš„ï¼Œåœ¨å±‚æ¬¡éå†çš„è¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°äº†ç›®æ ‡ç‚¹ä½å³å¯è¿”å›ï¼Œå› ä¸ºåŒä¸€ä¸ªå±‚æ¬¡æ‰€æ¶ˆè€—çš„å›åˆæ•°æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡é‡åˆ°ç›®æ ‡ç‚¹ä½çš„è·¯å¾„å³æ˜¯æœ€ä¼˜è§£ä¹‹ä¸€ã€‚

## ä»£ç å®ç°

&emsp;&emsp;æ¸…æ¥šç®—æ³•æµç¨‹åï¼Œä»£ç çš„å®ç°ç›¸å¯¹ç®€å•ï¼Œå¯ä»¥ä½¿ç”¨é€’å½’ä¹Ÿå¯ä»¥ä½¿ç”¨é˜Ÿåˆ—ï¼Œæˆ‘è¿™è¾¹æ˜¯é€’å½’å®Œæˆæœ€çŸ­è·¯å¾„æœç´¢çš„ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š

```javascript
class BFSCat {
    constructor(options) {
        // å®šä¹‰åŸºç¡€è¡Œåˆ—ä¿¡æ¯
        this.columns = (options && options.columns) || 16
        this.rows = (options && options.rows) || 8
    }

    /**
     * è·å–æœ€çŸ­è·¯å¾„
     * @param chessboard æ£‹ç›˜ä¿¡æ¯
     * @param catIndex çŒ«çš„ä½ç½®
     * @returns {Array} è·¯å¾„ä¿¡æ¯ æ— è§£æ—¶è¿”å›ç©ºæ•°ç»„
     */
    getShortestWays(chessboard, catIndex) {
        return this.search(chessboard, [{cur: catIndex, ways: []}])
    }

    /**
     * æ ¹æ®å½“å‰æ£‹ç›˜å±€åŠ¿æœç´¢å‡ºä¸€æ¡æœ€çŸ­è·¯å¾„
     * @param curChessboard å½“å‰æ£‹ç›˜å±€åŠ¿
     * @param curs çŒ«çš„å½“å‰ä½ç½®
     * @param history å†å²èµ°è¿‡çš„è·¯å¾„
     * @returns {Array} è¿”å›æœ€çŸ­è·¯å¾„ æ— è§£æ—¶è¿”å›ç©ºæ•°ç»„
     */
    search(curChessboard, curs, history) {
        if (!history) history = []
        let nexts = []
        for (let i in curs) {
            const curObj = curs[i];
            const cur = curObj.cur
            const ways = curObj.ways
            const effectNeighbors = this.getEffectNeighbors(history, cur, curChessboard)
            for (let j in effectNeighbors) {
                const next = effectNeighbors[j]
                if (curChessboard[next].flag === 2) {
                    // å¹¿åº¦éå†æŠ“åˆ°è€é¼  ç›´æ¥è¿”å›è·¯å¾„
                    return ways.slice().concat([cur, next])
                }
            }
            // ç¼“å­˜å†å²è·¯å¾„
            history = history.concat(effectNeighbors)
            nexts = nexts.concat(effectNeighbors.map(next => ({
                cur: next,
                ways: ways.slice().concat([cur])
            })))
        }
        if (nexts.length === 0) { // æ— è·¯å¯èµ° æ­¤é¢˜æ— è§£
            return []
        }
        return this.search(curChessboard, nexts, history)
    }

    /**
     *
     * @param history å†å²èµ°è¿‡çš„è·¯å¾„ é˜²æ­¢èµ°å›å¤´è·¯
     * @param cur å½“å‰ä½ç½®
     * @param chessboard æ£‹ç›˜ä¿¡æ¯
     * @returns {Array} ä¸‹ä¸€æ­¥å¯èƒ½çš„èµ°æ³•
     */
    getEffectNeighbors(history, cur, chessboard) {
        let result = []
        const p = this.computeXY(cur)
        const columns = this.columns
        const rows = this.rows
        if (p.x > 0 && this.checkNextPoint(chessboard[cur - 1])) result.push(cur - 1)
        if (p.x < columns - 1 && this.checkNextPoint(chessboard[cur + 1])) result.push(cur + 1)
        if (p.y > 0 && this.checkNextPoint(chessboard[cur - columns])) result.push(cur - columns)
        if (p.y < rows - 1 && this.checkNextPoint(chessboard[cur + columns])) result.push(cur + columns)
        return result.filter(next => !(history && history.includes(next)))
    }

    /**
     * æ ¹æ®æ£‹ç›˜çš„ç›¸å¯¹ä½ç½®è®¡ç®—æ£‹å­çš„åæ ‡
     * @param index æ£‹ç›˜ç›¸å¯¹ä½ç½®
     * @returns {{x: number, y: number}}
     */
    computeXY(index) {
        const columns = this.columns
        const x = index % columns
        const y = Math.floor(index / columns)
        return {x, y}
    }

    /**
     * åˆ¤æ–­ä¸‹ä¸€æ­¥ç‚¹ä½æ˜¯å¦å¯ä»¥ç§»åŠ¨
     */
    checkNextPoint(point) {
        return point.flag !== 3
    }
}
```

## æ•ˆæœæ¼”ç¤º

&emsp;&emsp;å°†ä½¿ç”¨åŸºäº`BFS`ç®—æ³•ç­–ç•¥è®¾è®¡çš„çŒ«åŠ å…¥åˆ°çŒ«é¼ æ¸¸æˆï¼Œæ•ˆæœå¦‚ä¸‹ï¼š

```html
<canvas id="BFSPlace">not support canvas</canvas>
<script>
    let cacheWays = null
    let index = 0
    const catHandler = (chessboard, curIndex, canMovePoints) => {
            if (cacheWays === null) {
                cacheWays = new BFSCat().getShortestWays(chessboard, curIndex)
                if (cacheWays.length === 0) {
                    throw new Error('æ­¤é¢˜æ— è§£')
                }
            }
            return cacheWays[index++]
        }
    gameGen.initGame('BFSPlace', catHandler , null)
</script>
```

{% raw %}
<canvas id="BFSPlace">not support canvas</canvas>
{% endraw %}

# åŠ å¼ºç‰ˆçŒ«é¼ æ¸¸æˆ

&emsp;&emsp;æ™®é€šç‰ˆçš„çŒ«é¼ æ¸¸æˆæˆ‘ä»¬ä½¿ç”¨åŸºäº`BFS`çš„æœ€çŸ­è·¯å¾„æœç´¢ç®—æ³•å³å¯æ‰¾åˆ°æœ€ä¼˜è§£äº†ï¼Œç°åœ¨æˆ‘ä»¬å°†æ¸¸æˆå‡çº§ï¼Œå¼•å…¥ä¸åŒç±»å‹çš„é“è·¯ï¼Œè¯·è®¾è®¡ä¸€ä¸ªç®—æ³•è®©`çŒ«`ä½¿ç”¨æœ€å°‘çš„ä½“åŠ›æŠ“ä½`è€é¼ `ï¼Œå…¶ä¸­åŠ å¼ºç‰ˆçŒ«é¼ æ¸¸æˆå¼•å…¥çš„ä¸‰ç§é“è·¯ç±»å‹å¦‚ä¸‹ï¼š

* æ™®é€šé“è·¯ ![](https://resources.chenjianhui.site/2019-06-20-game-background.png?imageView2/2/w/36/h/36/q/75|imageslim)ï¼šæ¶ˆè€—**ä¸€ç‚¹**ä½“åŠ›å€¼
* è‰åœ° ![](https://resources.chenjianhui.site/grassland-1.png?imageView2/2/w/45/h/45/q/75|imageslim)ï¼šæ¶ˆè€—**ä¸¤ç‚¹**ä½“åŠ›å€¼
* æºªæµ <img src="https://resources.chenjianhui.site/waterway-2.svg" style="width:45px;height:45px;"/>ï¼šæ¶ˆè€—**ä¸‰ç‚¹**ä½“åŠ›å€¼

&emsp;&emsp;åŒæ ·æˆ‘ä»¬å…ˆæ„å»ºå‡ºè¿™ä¸ªæ£‹ç›˜ï¼Œåªéœ€è¦å°†`options.complexRoad`é…ç½®ä¸º`true`å³å¯ï¼ŒæœªåŠ å…¥è¡ŒåŠ¨å†³ç­–ç®—æ³•çš„æ£‹ç›˜æ•ˆæœå¦‚ä¸‹ï¼š

```html
<canvas id="complexRoadPlace">not support canvas</canvas>
<script>
    gameGen.initGame('complexRoadPlace', null, null, {
        complexRoad: true
    })
</script>
```
{% raw %}
<canvas id="complexRoadPlace">not support canvas</canvas>
{% endraw %}

## è§£é¢˜æ€è€ƒ

&emsp;&emsp;åŠ å¼ºç‰ˆæœ¬çš„æ¸¸æˆè¦è€ƒè™‘ä½“åŠ›æ¶ˆè€—æœ€å°ï¼Œå› æ­¤æœ€çŸ­çš„è·¯å¾„æœªå¿…æ¶ˆè€—çš„ä½“åŠ›å°±æ˜¯æœ€å°‘çš„ï¼Œè¿™ä¸ªå¾ˆå®¹æ˜“ç†è§£ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½å•è€ƒè™‘æœ€çŸ­è·¯å¾„è¿™ä¸ªæ–¹é¢å»è§£é¢˜äº†ï¼Œè¿˜åº”è¯¥è€ƒè™‘åˆ°ä¸åŒé“è·¯çš„ä½“åŠ›æ¶ˆè€—ã€‚

## Aæ˜Ÿå¯»è·¯ç®—æ³•

&emsp;&emsp;å¯ä»¥ç›´æ¥ç‚¹å‡»[A*ç®—æ³•wiki](https://zh.wikipedia.org/wiki/A*æœå°‹æ¼”ç®—æ³•)æŸ¥çœ‹ä¸€ä¸‹ç®—æ³•çš„èƒŒæ™¯ï¼Œæˆ‘åœ¨è¿™é‡Œåªä»‹ç»ç®—æ³•çš„ä¸€äº›æ ¸å¿ƒæ¦‚å¿µï¼Œåœ¨A*ç®—æ³•ä¸­æœ‰ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µ

* **Gå€¼**ï¼š**èµ·å§‹ç‚¹**åˆ°**è¡ŒåŠ¨ç‚¹**çš„**ç§»åŠ¨é‡**
  * èµ·å§‹ç‚¹ï¼šçŒ«çš„åˆå§‹ä½ç½®
  * è¡ŒåŠ¨ç‚¹ï¼šçŒ«çš„ä¸‹ä¸€æ­¥å†³ç­–ä½ç½®
  * ç§»åŠ¨é‡ï¼šåœ¨è¿™é‡Œæˆ‘ä»¬è€ƒè™‘åœ°å½¢çš„æƒ…å†µä¸‹æ˜¯å¯ç§»åŠ¨æ ¼å­çš„**ä½“åŠ›æ¶ˆè€—é‡**
* **Hå€¼**ï¼šè¡ŒåŠ¨ç‚¹åˆ°**ç»ˆç‚¹**çš„**ä¼°ç®—é‡**ï¼Œè¿™ä¸ªå€¼ä»…ä»…æ˜¯ä¸€ä¸ªä¼°ç®—å€¼ï¼Œæ¯”å¦‚ä½ç½®1åˆ°ä½ç½®31çš„ä¼°ç®—å€¼æˆ‘ä»¬å¿½ç•¥åœ°å½¢å¯ä»¥å–æœ€å°æ ¼å­æ•°ï¼Œå³9
  * ç»ˆç‚¹ï¼šè€é¼ çš„ä½ç½®
  * ä¼°ç®—é‡ï¼šè¿™é‡Œæ˜¯ä¸è€ƒè™‘éšœç¢ç‰©çš„ä¸€ä¸ªä¼°ç®—ç§»åŠ¨é‡

&emsp;&emsp;å¥½çš„æ ¸å¿ƒæ¦‚å¿µä»‹ç»å®Œï¼Œæˆ‘ä»¬åŸºäºä¸€ä¸ªæ£‹ç›˜æ¥å®ŒæˆAæ˜Ÿç®—æ³•çš„å†³ç­–æµç¨‹ï¼Œä¸‹é¢çš„æ£‹ç›˜å’Œä¸Šé¢çš„åŸºæœ¬ä¸€è‡´ï¼ŒåŒºåˆ«åœ¨äºåŠ å…¥äº†åœ°å½¢å› ç´ ï¼Œæ¯ä¸ªå¯è¡Œèµ°çš„æ ¼å­ä¸­ç”¨æ‹¬å·æ‹¬èµ·æ¥çš„å°±æ˜¯ç‰¹æ®Šåœ°å½¢çš„ä½“åŠ›æ¶ˆè€—å€¼ï¼Œè¿™å°†ä¼šå½±å“åˆ°å„ä¸ªç‚¹ä½çš„Gã€Hå€¼ã€‚

|           |          |                            |                           |                            |                            |      |           |
| --------- | -------- | -------------------------- | ------------------------- | -------------------------- | -------------------------- | ---- | --------- |
| 0:cat:    | 1**(2)** | 2                          | **3**:mountain_bicyclist: | 4                          | 5                          | 6    | 7         |
| 8         | 9**(2)** | **10**:mountain_bicyclist: | 11                        | 12                         | **13**:mountain_bicyclist: | 14   | 15**(2)** |
| 16        | 17       | **18**:mountain_bicyclist: | 19                        | 20**(3)**                  | 21**(3)**                  | 22   | 23**(3)** |
| 24**(2)** | 25       | 26                         | 27                        | **28**:mountain_bicyclist: | 29                         | 30   | 31:mouse: |
|           |          |                            |                           |                            |                            |      |           |

&emsp;&emsp;ç°åœ¨æˆ‘ä»¬åŸºäºä¸Šè¿°æ£‹ç›˜æ¥ç®€è¿°ä¸€ä¸‹Aæ˜Ÿç®—æ³•çš„å†³ç­–æµç¨‹ï¼Œé¦–å…ˆæˆ‘ä»¬è¦åŸºäº**å½“å‰è¡ŒåŠ¨ç‚¹**æ±‚å‡º**é‚»è¿‘å¯ç§»åŠ¨ç‚¹**çš„Gã€Hå€¼ï¼Œæ ¹æ®`F = G + H`å…¬å¼å¾—å‡ºç‚¹ä½çš„**å’Œå€¼F**ï¼Œç„¶åæ‰¾ä¸€ä¸ªFå€¼æœ€å°çš„ç‚¹ä½œä¸ºå½“å‰è¡ŒåŠ¨ç‚¹ç»§ç»­è¿›è¡Œåˆ¤æ–­ï¼Œç›´åˆ°æ‰¾åˆ°è€é¼ ä½ç½®æˆ–è€…æ— ç‚¹å¯é€‰ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸¤ä¸ªåˆ—è¡¨

* **openåˆ—è¡¨**ï¼šè®°å½•ä¸‹æ‰€æœ‰**è¢«è€ƒè™‘**çš„ç‚¹ä½åˆ—è¡¨
* **closeåˆ—è¡¨**ï¼šè®°å½•ä¸‹æ‰€æœ‰**ä¸è¢«è€ƒè™‘**çš„ç‚¹ä½åˆ—è¡¨

&emsp;&emsp;ç°åœ¨æˆ‘å°†åŸºäºè¿™ä¸ªå±€åŠ¿å»æ¨¡æ‹Ÿ**Aæ˜Ÿç®—æ³•**çš„æœç´¢æµç¨‹ï¼Œå…¶ä¸­ğŸ”•ä»£è¡¨ä¸è¢«è€ƒè™‘çš„ç‚¹ä½closeã€:walking_man:ä»£è¡¨å½“å‰è¡ŒåŠ¨ç‚¹ã€:cat:ä»£è¡¨è¢«è€ƒè™‘çš„ç‚¹ä½openã€**F()**æ‹¬å·å†…éƒ¨çš„å€¼ä»£è¡¨è¢«è€ƒè™‘ç‚¹ä½çš„å’Œå€¼`G + H`ï¼Œç°åœ¨æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥çš„æ¨¡æ‹Ÿå¦‚ä¸‹ï¼š

1. **[å›åˆ1]** åŸºäºä½ç½®0æœç´¢åˆ°å¯èƒ½èµ°æ³•[1, 8]ï¼Œè®¡ç®—å’Œå€¼ä¸º[1(2 + 9), 8(1 + 9)]ï¼Œ`open = [1(11), 8(10)]`ã€`close = [0(10)]`ï¼Œæ‹¬å·å†…ä¸ºå’Œå€¼F

|                         |                    |                            |                           |                            |                            |      |           |
| ----------------------- | ------------------ | -------------------------- | ------------------------- | -------------------------- | -------------------------- | ---- | --------- |
| 0:no_bell::walking_man: | 1**(2)**:cat:F(11) | 2                          | **3**:mountain_bicyclist: | 4                          | 5                          | 6    | 7         |
| 8ğŸ±F(10)                 | 9**(2)**           | **10**:mountain_bicyclist: | 11                        | 12                         | **13**:mountain_bicyclist: | 14   | 15**(2)** |
| 16                      | 17                 | **18**:mountain_bicyclist: | 19                        | 20**(3)**                  | 21**(3)**                  | 22   | 23**(3)** |
| 24**(2)**               | 25                 | 26                         | 27                        | **28**:mountain_bicyclist: | 29                         | 30   | 31:mouse: |
|                         |                    |                            |                           |                            |                            |      |           |

2. **[å›åˆ2]** åœ¨openåˆ—è¡¨æ‰¾åˆ°å’Œå€¼æœ€å°çš„ç‚¹ä½œä¸ºå½“å‰è¡ŒåŠ¨ç‚¹ï¼Œæ‰¾åˆ°å¯èƒ½èµ°æ³•è®¡ç®—å’Œå€¼å¹¶åŠ å…¥åˆ°openåˆ—è¡¨ï¼ŒåŒæ—¶å½“å‰è¡ŒåŠ¨ç‚¹æ”¾å…¥closeåˆ—è¡¨ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å°†é€‰æ‹©ç‚¹8ä½œä¸ºå½“å‰è¡ŒåŠ¨ç‚¹ï¼Œæ­¤æ—¶ `open = [1(11), 9(11), 16(10)`ã€`close = [0(10), 8(10)]`

|                         |                |                            |                           |                            |                            |      |           |
| ----------------------- | -------------- | -------------------------- | ------------------------- | -------------------------- | -------------------------- | ---- | --------- |
| 0:no_bell:              | 1**(2)**ğŸ±F(11) | 2                          | **3**:mountain_bicyclist: | 4                          | 5                          | 6    | 7         |
| 8:no_bell::walking_man: | 9**(2)**ğŸ±F(11) | **10**:mountain_bicyclist: | 11                        | 12                         | **13**:mountain_bicyclist: | 14   | 15**(2)** |
| 16ğŸ±F(10)                | 17             | **18**:mountain_bicyclist: | 19                        | 20**(3)**                  | 21**(3)**                  | 22   | 23**(3)** |
| 24**(2)**               | 25             | 26                         | 27                        | **28**:mountain_bicyclist: | 29                         | 30   | 31:mouse: |
|                         |                |                            |                           |                            |                            |      |           |

3. **[å›åˆ3]** é€‰æ‹©16ï¼Œæ­¤æ—¶`open = [1(11), 9(11), 17(10), 24(11)`ã€`close = [0(10), 8(10), 16(10)]`

|                          |                |                            |                           |                            |                            |      |           |
| ------------------------ | -------------- | -------------------------- | ------------------------- | -------------------------- | -------------------------- | ---- | --------- |
| 0:no_bell:               | 1**(2)**ğŸ±F(11) | 2                          | **3**:mountain_bicyclist: | 4                          | 5                          | 6    | 7         |
| 8:no_bell:               | 9**(2)**ğŸ±F(11) | **10**:mountain_bicyclist: | 11                        | 12                         | **13**:mountain_bicyclist: | 14   | 15**(2)** |
| 16:no_bell::walking_man: | 17ğŸ±F(10)       | **18**:mountain_bicyclist: | 19                        | 20**(3)**                  | 21**(3)**                  | 22   | 23**(3)** |
| 24**(2)**ğŸ±F(11)          | 25             | 26                         | 27                        | **28**:mountain_bicyclist: | 29                         | 30   | 31:mouse: |
|                          |                |                            |                           |                            |                            |      |           |

4. **[å›åˆ4]** é€‰æ‹©17

|                          |                |                            |                           |                            |                            |      |           |
| ------------------------ | -------------- | -------------------------- | ------------------------- | -------------------------- | -------------------------- | ---- | --------- |
| 0:no_bell:               | 1**(2)**ğŸ±F(11) | 2                          | **3**:mountain_bicyclist: | 4                          | 5                          | 6    | 7         |
| 8:no_bell:               | 9**(2)**ğŸ±F(11) | **10**:mountain_bicyclist: | 11                 | 12                         | **13**:mountain_bicyclist: | 14   | 15**(2)** |
| 16:no_bell: | 17:no_bell::walking_man: | **18**:mountain_bicyclist: | 19 | 20**(3)**           | 21**(3)**                  | 22   | 23**(3)** |
| 24**(2)**ğŸ±F(11)          | 25ğŸ±F(10) | 26                | 27 | **28**:mountain_bicyclist: | 29                         | 30   | 31:mouse: |
|                          |                |                            |                           |                            |                            |      |           |

5. **[å›åˆ5]** é€‰æ‹©25

|                          |                |                            |                           |                            |                            |      |           |
| ------------------------ | -------------- | -------------------------- | ------------------------- | -------------------------- | -------------------------- | ---- | --------- |
| 0:no_bell:               | 1**(2)**ğŸ±F(11) | 2                          | **3**:mountain_bicyclist: | 4                          | 5                          | 6    | 7         |
| 8:no_bell:               | 9**(2)**ğŸ±F(11) | **10**:mountain_bicyclist: | 11                 | 12                         | **13**:mountain_bicyclist: | 14   | 15**(2)** |
| 16:no_bell: | 17:no_bell: | **18**:mountain_bicyclist: | 19 | 20**(3)**           | 21**(3)**                  | 22   | 23**(3)** |
| 24**(2)**ğŸ±F(11)          | 25:no_bell::walking_man: | 26ğŸ±F(10)         | 27 | **28**:mountain_bicyclist: | 29                         | 30   | 31:mouse: |
|                          |                |                            |                           |                            |                            |      |           |

6. **[å›åˆ6]** é€‰æ‹©26

|                          |                |                            |                           |                            |                            |      |           |
| ------------------------ | -------------- | -------------------------- | ------------------------- | -------------------------- | -------------------------- | ---- | --------- |
| 0:no_bell:               | 1**(2)**ğŸ±F(11) | 2                          | **3**:mountain_bicyclist: | 4                          | 5                          | 6    | 7         |
| 8:no_bell:               | 9**(2)**ğŸ±F(11) | **10**:mountain_bicyclist: | 11                 | 12                         | **13**:mountain_bicyclist: | 14   | 15**(2)** |
| 16:no_bell: | 17:no_bell: | **18**:mountain_bicyclist: | 19 | 20**(3)**           | 21**(3)**                  | 22   | 23**(3)** |
| 24**(2)**ğŸ±F(11)          | 25:no_bell: | 26ğŸ”•ğŸš¶     | 27ğŸ±F(10) | **28**:mountain_bicyclist: | 29                         | 30   | 31:mouse: |
|                          |                |                            |                           |                            |                            |      |           |

7. **[å›åˆ7]** é€‰æ‹©27ï¼Œæ³¨æ„ï¼Œè¿™é‡Œç”±äºè·¯éšœé—®é¢˜ç»•è·¯äº†ï¼Œæ‰€ä»¥Få€¼å˜ä¸ºäº†12(7 + 5)

|                          |                |                            |                           |                            |                            |      |           |
| ------------------------ | -------------- | -------------------------- | ------------------------- | -------------------------- | -------------------------- | ---- | --------- |
| 0:no_bell:               | 1**(2)**ğŸ±F(11) | 2                          | **3**:mountain_bicyclist: | 4                          | 5                          | 6    | 7         |
| 8:no_bell:               | 9**(2)**ğŸ±F(11) | **10**:mountain_bicyclist: | 11                 | 12                         | **13**:mountain_bicyclist: | 14   | 15**(2)** |
| 16:no_bell: | 17:no_bell: | **18**:mountain_bicyclist: | 19ğŸ±F(12) | 20**(3)**           | 21**(3)**                  | 22   | 23**(3)** |
| 24**(2)**ğŸ±F(11)          | 25:no_bell: | 26ğŸ”•     | 27ğŸ”•ğŸš¶ | **28**:mountain_bicyclist: | 29                         | 30   | 31:mouse: |
|                          |                |                            |                           |                            |                            |      |           |

8. **[å›åˆ8]** é€‰æ‹©1

|                          |                |                            |                           |                            |                            |      |           |
| ------------------------ | -------------- | -------------------------- | ------------------------- | -------------------------- | -------------------------- | ---- | --------- |
| 0:no_bell:               | 1**(2)**ğŸ”•ğŸš¶ | 2ğŸ±F(11)                 | **3**:mountain_bicyclist: | 4                          | 5                          | 6    | 7         |
| 8:no_bell:               | 9**(2)**ğŸ±F(11) | **10**:mountain_bicyclist: | 11                 | 12                         | **13**:mountain_bicyclist: | 14   | 15**(2)** |
| 16:no_bell: | 17:no_bell: | **18**:mountain_bicyclist: | 19ğŸ±F(12) | 20**(3)**           | 21**(3)**                  | 22   | 23**(3)** |
| 24**(2)**ğŸ±F(11)          | 25:no_bell: | 26ğŸ”•     | 27ğŸ”• | **28**:mountain_bicyclist: | 29                         | 30   | 31:mouse: |
|                          |                |                            |                           |                            |                            |      |           |

9. **[å›åˆ9 - 12]** é€‰æ‹©2ã€9ã€24ï¼Œå‘ç°éƒ½ä¸ºæ­»è·¯ï¼ŒåŠ å…¥closeåˆ—è¡¨ï¼Œæœ€ç»ˆåªèƒ½é€‰æ‹©19

|                          |                |                            |                           |                            |                            |      |           |
| ------------------------ | -------------- | -------------------------- | ------------------------- | -------------------------- | -------------------------- | ---- | --------- |
| 0:no_bell:               | 1**(2)**ğŸ”• | 2ğŸ”•               | **3**:mountain_bicyclist: | 4                          | 5                          | 6    | 7         |
| 8:no_bell:               | 9**(2)**ğŸ”• | **10**:mountain_bicyclist: | 11ğŸ±F(14)        | 12                         | **13**:mountain_bicyclist: | 14   | 15**(2)** |
| 16:no_bell: | 17:no_bell: | **18**:mountain_bicyclist: | 19ğŸ”•ğŸš¶ | 20**(3)**ğŸ±F(14)  | 21**(3)**                  | 22   | 23**(3)** |
| 24**(2)**ğŸ”•        | 25:no_bell: | 26ğŸ”•     | 27ğŸ”• | **28**:mountain_bicyclist: | 29                         | 30   | 31:mouse: |
|                          |                |                            |                           |                            |                            |      |           |

10. **[å›åˆ13]** é€‰æ‹©20ï¼Œå½“å‡ºç°Få€¼ç›¸åŒçš„æƒ…å†µæˆ‘ä»¬å°±å–ç¬¬ä¸€ä¸ªåˆ¤æ–­ç”Ÿæˆçš„ï¼Œæˆ‘çš„åˆ¤æ–­æ˜¯è‡ªå·¦å‘å³ã€è‡ªä¸Šåˆ°ä¸‹ï¼Œæ‰€ä»¥ç‚¹ä½20å…ˆè¢«åˆ¤æ–­

|                          |                |                            |                           |                            |                            |      |           |
| ------------------------ | -------------- | -------------------------- | ------------------------- | -------------------------- | -------------------------- | ---- | --------- |
| 0:no_bell:               | 1**(2)**ğŸ”• | 2ğŸ”•               | **3**:mountain_bicyclist: | 4                          | 5                          | 6    | 7         |
| 8:no_bell:               | 9**(2)**ğŸ”• | **10**:mountain_bicyclist: | 11ğŸ±F(14)        | 12ğŸ±F(16)                | **13**:mountain_bicyclist: | 14   | 15**(2)** |
| 16:no_bell: | 17:no_bell: | **18**:mountain_bicyclist: | 19ğŸ”• | 20**(3)**ğŸ”•ğŸš¶ | 21**(3)**ğŸ±F(16)         | 22   | 23**(3)** |
| 24**(2)**ğŸ”•        | 25:no_bell: | 26ğŸ”•     | 27ğŸ”• | **28**:mountain_bicyclist: | 29                         | 30   | 31:mouse: |
|                          |                |                            |                           |                            |                            |      |           |

11. **[å›åˆ14]** é€‰æ‹©11ï¼Œæˆ‘ä»¬å‘ç°ä»¥ç‚¹11ä¸ºè¡ŒåŠ¨ç‚¹çš„ç›¸é‚»ç‚¹12è®¡ç®—å‡ºçš„Få€¼ä¸º14æ¯”16å°ï¼Œæ•…æ›´æ–°èŠ‚ç‚¹

|                          |                |                            |                           |                            |                            |      |           |
| ------------------------ | -------------- | -------------------------- | ------------------------- | -------------------------- | -------------------------- | ---- | --------- |
| 0:no_bell:               | 1**(2)**ğŸ”• | 2ğŸ”•               | **3**:mountain_bicyclist: | 4                          | 5                          | 6    | 7         |
| 8:no_bell:               | 9**(2)**ğŸ”• | **10**:mountain_bicyclist: | 11ğŸ”•ğŸš¶    | 12ğŸ±F(14)                | **13**:mountain_bicyclist: | 14   | 15**(2)** |
| 16:no_bell: | 17:no_bell: | **18**:mountain_bicyclist: | 19ğŸ”• | 20**(3)**ğŸ”• | 21**(3)**ğŸ±F(16)         | 22   | 23**(3)** |
| 24**(2)**ğŸ”•        | 25:no_bell: | 26ğŸ”•     | 27ğŸ”• | **28**:mountain_bicyclist: | 29                         | 30   | 31:mouse: |
|                          |                |                            |                           |                            |                            |      |           |

12. **[å›åˆ15 - 18]** é€‰æ‹©12ã€4ã€5ã€6

|                          |                |                            |                           |                            |                            |      |           |
| ------------------------ | -------------- | -------------------------- | ------------------------- | -------------------------- | -------------------------- | ---- | --------- |
| 0:no_bell:               | 1**(2)**ğŸ”• | 2ğŸ”•               | **3**:mountain_bicyclist: | 4ğŸ”•                 | 5ğŸ”•                        | 6ğŸ”•ğŸš¶ | 7ğŸ±F(16)  |
| 8:no_bell:               | 9**(2)**ğŸ”• | **10**:mountain_bicyclist: | 11ğŸ”•    | 12ğŸ”•            | **13**:mountain_bicyclist: | 14ğŸ±F(16) | 15**(2)** |
| 16:no_bell: | 17:no_bell: | **18**:mountain_bicyclist: | 19ğŸ”• | 20**(3)**ğŸ”• | 21**(3)**ğŸ±F(16)         | 22   | 23**(3)** |
| 24**(2)**ğŸ”•        | 25:no_bell: | 26ğŸ”•     | 27ğŸ”• | **28**:mountain_bicyclist: | 29                         | 30   | 31:mouse: |
|                          |                |                            |                           |                            |                            |      |           |

12. **[å›åˆ19]** é€‰æ‹©7

|                          |                |                            |                           |                            |                            |      |           |
| ------------------------ | -------------- | -------------------------- | ------------------------- | -------------------------- | -------------------------- | ---- | --------- |
| 0:no_bell:               | 1**(2)**ğŸ”• | 2ğŸ”•               | **3**:mountain_bicyclist: | 4ğŸ”•                 | 5ğŸ”•                        | 6ğŸ”• | 7ğŸ”•ğŸš¶ |
| 8:no_bell:               | 9**(2)**ğŸ”• | **10**:mountain_bicyclist: | 11ğŸ”•    | 12ğŸ”•            | **13**:mountain_bicyclist: | 14ğŸ±F(16) | 15**(2)**ğŸ±F(17) |
| 16:no_bell: | 17:no_bell: | **18**:mountain_bicyclist: | 19ğŸ”• | 20**(3)**ğŸ”• | 21**(3)**ğŸ±F(16)         | 22   | 23**(3)** |
| 24**(2)**ğŸ”•        | 25:no_bell: | 26ğŸ”•     | 27ğŸ”• | **28**:mountain_bicyclist: | 29                         | 30   | 31:mouse: |
|                          |                |                            |                           |                            |                            |      |           |

13. **[å›åˆ20]** é€‰æ‹©14

|                          |                |                            |                           |                            |                            |      |           |
| ------------------------ | -------------- | -------------------------- | ------------------------- | -------------------------- | -------------------------- | ---- | --------- |
| 0:no_bell:               | 1**(2)**ğŸ”• | 2ğŸ”•               | **3**:mountain_bicyclist: | 4ğŸ”•                 | 5ğŸ”•                        | 6ğŸ”• | 7ğŸ”• |
| 8:no_bell:               | 9**(2)**ğŸ”• | **10**:mountain_bicyclist: | 11ğŸ”•    | 12ğŸ”•            | **13**:mountain_bicyclist: | 14ğŸ”•ğŸš¶ | 15**(2)**ğŸ±F(17) |
| 16:no_bell: | 17:no_bell: | **18**:mountain_bicyclist: | 19ğŸ”• | 20**(3)**ğŸ”• | 21**(3)**ğŸ±F(16)         | 22ğŸ±F(16) | 23**(3)** |
| 24**(2)**ğŸ”•        | 25:no_bell: | 26ğŸ”•     | 27ğŸ”• | **28**:mountain_bicyclist: | 29                         | 30   | 31:mouse: |
|                          |                |                            |                           |                            |                            |      |           |

14. **[å›åˆ21]** é€‰æ‹©22

|                          |                |                            |                           |                            |                            |      |           |
| ------------------------ | -------------- | -------------------------- | ------------------------- | -------------------------- | -------------------------- | ---- | --------- |
| 0:no_bell:               | 1**(2)**ğŸ”• | 2ğŸ”•               | **3**:mountain_bicyclist: | 4ğŸ”•                 | 5ğŸ”•                        | 6ğŸ”• | 7ğŸ”• |
| 8:no_bell:               | 9**(2)**ğŸ”• | **10**:mountain_bicyclist: | 11ğŸ”•    | 12ğŸ”•            | **13**:mountain_bicyclist: | 14ğŸ”• | 15**(2)**ğŸ±F(17) |
| 16:no_bell: | 17:no_bell: | **18**:mountain_bicyclist: | 19ğŸ”• | 20**(3)**ğŸ”• | 21**(3)**ğŸ±F(16)         | 22ğŸ”•ğŸš¶ | 23**(3)**ğŸ±F(18) |
| 24**(2)**ğŸ”•        | 25:no_bell: | 26ğŸ”•     | 27ğŸ”• | **28**:mountain_bicyclist: | 29                         | 30ğŸ±F(16) | 31:mouse: |
|                          |                |                            |                           |                            |                            |      |           |

15. **[å›åˆ22]** é€‰æ‹©30ï¼Œå‘ç°é‚»è¿‘ç‚¹ä¸­æœ‰ç›®æ ‡ç‚¹ï¼Œä¸”å€¼ä¸º16æ˜¯æœ€çŸ­è·¯å¾„ä¹‹ä¸€ï¼Œéå†å®Œæˆï¼Œå…·ä½“è·¯å¾„ä¸º **0,8,16,17,25,26,27,19,11,12,4,5,6,14,22,30,31**ï¼Œå…±æ¶ˆè€—ä½“åŠ›å€¼16ç‚¹

|                          |                |                            |                           |                            |                            |      |           |
| ------------------------ | -------------- | -------------------------- | ------------------------- | -------------------------- | -------------------------- | ---- | --------- |
| 0:no_bell:               | 1**(2)**ğŸ”• | 2ğŸ”•               | **3**:mountain_bicyclist: | 4ğŸ”•                 | 5ğŸ”•                        | 6ğŸ”• | 7ğŸ”• |
| 8:no_bell:               | 9**(2)**ğŸ”• | **10**:mountain_bicyclist: | 11ğŸ”•    | 12ğŸ”•            | **13**:mountain_bicyclist: | 14ğŸ”• | 15**(2)**ğŸ±F(17) |
| 16:no_bell: | 17:no_bell: | **18**:mountain_bicyclist: | 19ğŸ”• | 20**(3)**ğŸ”• | 21**(3)**ğŸ±F(16)         | 22ğŸ”• | 23**(3)**ğŸ±F(18) |
| 24**(2)**ğŸ”•        | 25:no_bell: | 26ğŸ”•     | 27ğŸ”• | **28**:mountain_bicyclist: | 29ğŸ±F(18)                 | 30ğŸ”•ğŸš¶ | 31:mouse:ğŸ±F(16) |
|                          |                |                            |                           |                            |                            |      |           |

## ä»£ç å®ç°

```javascript
class AStarCat {
    constructor(options) {
        // å®šä¹‰åŸºç¡€è¡Œåˆ—ä¿¡æ¯
        this.columns = (options && options.columns) || 16
        this.rows = (options && options.rows) || 8
    }

    /**
     * è·å–æœ€ä¼˜è§£
     * @param chessboard æ£‹ç›˜ä¿¡æ¯
     * @returns {Array} è·¯å¾„ä¿¡æ¯ æ— è§£æ—¶è¿”å›ç©ºæ•°ç»„
     */
    getShortestWays(chessboard) {
        const catIndex = chessboard.findIndex(item => item.flag === 1)
        const mouseIndex = chessboard.findIndex(item => item.flag === 2)
        return this.search(chessboard, {cur: catIndex, ways: []}, catIndex, mouseIndex)
    }

    /**
     * æœç´¢è·¯å¾„
     * @param curChessboard æ£‹ç›˜ä¿¡æ¯
     * @param curObj å½“å‰è¡ŒåŠ¨ç‚¹å¯¹è±¡
     * @param catIndex çŒ«çš„åˆå§‹ä½ç½®
     * @param mouseIndex è€é¼ çš„åˆå§‹ä½ç½®
     * @param open è¢«è€ƒè™‘çš„ç‚¹ä½
     * @param close ä¸è¢«è€ƒè™‘çš„ç‚¹ä½
     * @returns {Array} è¿”å›æœ€ä¼˜è·¯å¾„ æ— è§£æ—¶è¿”å›ç©ºæ•°ç»„
     */
    search(curChessboard, curObj, catIndex, mouseIndex, open, close) {
        if (!open) open = []
        if (!close) close = []
        const cur = curObj.cur
        close.push(cur)
        open.splice(open.findIndex(o => o.cur === cur), 1)
        const effectNeighbors = this.getEffectNeighbors(close, cur, curChessboard)
        const nextOpen = effectNeighbors.map(next => {
            const ways = curObj.ways.concat([next])
            return {
                cur: next,
                f: this.computeF(mouseIndex, next, ways, curChessboard),
                ways: ways
            }
        })
        // å¦‚æœopenä¸nextOpenæœ‰äº¤é›†ï¼Œå–æ›´å°å€¼
        nextOpen.forEach(n => {
            let sameIndex = open.findIndex(o => o.cur === n.cur)
            if (sameIndex > -1) {
                if (n.f < open[sameIndex].f) {
                    open.splice(sameIndex, 1, n)
                }
            } else {
                open.push(n)
            }
        })
        open = open.concat()
        const success = open.find(o => o.cur === mouseIndex)
        if (success) {
            return success.ways
        }
        if (open.length > 0) {
            return this.search(curChessboard, open.sort((a, b) => (a.f - b.f))[0], catIndex, mouseIndex, open.slice(), close.slice())
        }
        return []
    }

    /**
     *
     * @param close ä¸è¢«è€ƒè™‘çš„èŠ‚ç‚¹
     * @param cur å½“å‰ä½ç½®
     * @param chessboard æ£‹ç›˜ä¿¡æ¯
     * @returns {Array} ä¸‹ä¸€æ­¥å¯èƒ½çš„èµ°æ³•
     */
    getEffectNeighbors(close, cur, chessboard) {
        let result = []
        const p = this.computeXY(cur)
        const columns = this.columns
        const rows = this.rows
        if (p.x > 0 && this.checkNextPoint(chessboard[cur - 1])) result.push(cur - 1)
        if (p.x < columns - 1 && this.checkNextPoint(chessboard[cur + 1])) result.push(cur + 1)
        if (p.y > 0 && this.checkNextPoint(chessboard[cur - columns])) result.push(cur - columns)
        if (p.y < rows - 1 && this.checkNextPoint(chessboard[cur + columns])) result.push(cur + columns)
        return result.filter(next => !(close && close.includes(next)))
    }

    /**
     * è®¡ç®—GHçš„å’Œå€¼
     * @param mouseIndex è€é¼ çš„ä½ç½®
     * @param curIndex å½“å‰è¡ŒåŠ¨ç‚¹
     * @param ways å½“å‰è¡ŒåŠ¨ç‚¹çš„å†å²è·¯å¾„
     * @param chessboard æ£‹ç›˜ä¿¡æ¯
     */
    computeF(mouseIndex, curIndex, ways, chessboard) {
        const mouseP = this.computeXY(mouseIndex)
        const curP = this.computeXY(curIndex)
        const g = ways.reduce((a, b) => (chessboard[a].depletePower + chessboard[b].depletePower), 0)
        const h = Math.abs(curP.x - mouseP.x) + Math.abs(curP.y - mouseP.y)
        return g + h
    }

    /**
     * æ ¹æ®æ£‹ç›˜çš„ç›¸å¯¹ä½ç½®è®¡ç®—æ£‹å­çš„åæ ‡
     * @param index æ£‹ç›˜ç›¸å¯¹ä½ç½®
     * @returns {{x: number, y: number}}
     */
    computeXY(index) {
        const columns = this.columns
        const x = index % columns
        const y = Math.floor(index / columns)
        return {x, y}
    }

    /**
     * åˆ¤æ–­ä¸‹ä¸€æ­¥ç‚¹ä½æ˜¯å¦å¯ä»¥ç§»åŠ¨
     */
    checkNextPoint(point) {
        return point.flag !== 3
    }
}
```

## æ•ˆæœæ¼”ç¤º

```html
<canvas id="AStarPlace">not support canvas</canvas>
<script>
    let cacheWays = null
    let index = 0
    const catHandler = (chessboard, curIndex, canMovePoints) => {
            if (cacheWays === null) {
                cacheWays = new AStarCat().getShortestWays(chessboard)
                if (cacheWays.length === 0) {
                    throw new Error('æ­¤é¢˜æ— è§£')
                }
            }
            return cacheWays[index++]
        }
    gameGen.initGame('AStarPlace', catHandler , null, {
        complexRoad: true
    })
</script>
```

{% raw %}
<canvas id="AStarPlace">not support canvas</canvas>
{% endraw %}

# å‡çº§ç©æ³•

&emsp;&emsp;åœ¨è¿™ä¸ªæ¸¸æˆä¸­ï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥è®¾è®¡çŒ«çš„è¡ŒåŠ¨ç­–ç•¥å‡½æ•°ï¼Œè¿˜å¯ä»¥è®¾è®¡è€é¼ çš„è¡ŒåŠ¨ç­–ç•¥å‡½æ•°æ¥èº²é¿çŒ«çš„è¿½å‡»ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥æƒ³æƒ³å¦‚æœèº²é¿ç®—æ³•åˆåº”è¯¥å¦‚ä½•å®ç°ã€‚

# å‚è€ƒèµ„æ–™

* [Aæ˜Ÿå¯»è·¯ç®—æ³•-(å…¥é—¨çº§) - Colinä¸¶- CSDNåšå®¢](https://blog.csdn.net/hitwhylz/article/details/41383561)

{% raw %}
<!-- æ­¤æ®µä»£ç ä¸ºæ¸¸æˆæ„å»ºç¨‹åº -->
<script type="text/javascript" src="https://resources.chenjianhui.site/cat-mouse-game-gen-0.1.9.js"></script>
<script type="text/javascript" src="https://resources.chenjianhui.site/cat-mouse-game-BFSCat-0.2.js"></script>
<script type="text/javascript" src="https://resources.chenjianhui.site/cat-mouse-game-AStarCat-0.1.js"></script>
<script>
    gameGen.initGame('staticPlace')
    gameGen.initGame('randomPlace', (chessboard, curIndex, canMovePoints) => canMovePoints[Math.round(Math.random() * (canMovePoints.length - 1))])
    let cacheWaysOfBSF = null
    let indexOfBSF = 0
    const catHandlerOfBFS = (chessboard, curIndex, canMovePoints) => {
            if (cacheWaysOfBSF === null) {
                cacheWaysOfBSF = new BFSCat().getShortestWays(chessboard, curIndex)
                if (cacheWaysOfBSF.length === 0) {
                    throw new Error('æ­¤é¢˜æ— è§£')
                }
            }
            return cacheWaysOfBSF[indexOfBSF++]
        }
    gameGen.initGame('BFSPlace', catHandlerOfBFS , null)
    gameGen.initGame('complexRoadPlace', null, null, { complexRoad: true })
    let cacheWaysOfAStar = null
    let indexOfAstar = 0
    const catHandlerOfAstar = (chessboard, curIndex, canMovePoints) => {
            if (cacheWaysOfAStar === null) {
                cacheWaysOfAStar = new AStarCat().getShortestWays(chessboard)
                if (cacheWaysOfAStar.length === 0) {
                    throw new Error('æ­¤é¢˜æ— è§£')
                }
            }
            return cacheWaysOfAStar[indexOfAstar++]
        }
    gameGen.initGame('AStarPlace', catHandlerOfAstar , null, {
        complexRoad: true
    })
</script>
{% endraw %}